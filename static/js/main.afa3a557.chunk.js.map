{"version":3,"sources":["utils.ts","App.tsx","components/Pagination/Pagination.tsx","index.tsx"],"names":["getNumbers","from","to","numbers","n","push","getSearchWith","currentParams","paramsToUpdate","newParams","URLSearchParams","toString","Object","entries","forEach","key","value","delete","Array","isArray","part","append","set","Params","Pagination","total","perPage","currentPage","pages","useMemo","Math","ceil","useSearchParams","searchParams","isLastPage","length","className","classNames","disabled","search","page","map","pageNumber","active","items","App","setSearchParams","Number","get","Page","itemsPerPage","PerPage","startIndex","endIndex","visibleItems","slice","id","onChange","e","target","htmlFor","item","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.afa3a557.chunk.js","sourcesContent":["export function getNumbers(from: number, to: number): number[] {\n  const numbers = [];\n\n  for (let n = from; n <= to; n += 1) {\n    numbers.push(n);\n  }\n\n  return numbers;\n}\n\nexport type SearchParams = {\n  [key: string]: string | string[] | null,\n};\n\nexport function getSearchWith(\n  currentParams: URLSearchParams,\n  paramsToUpdate: SearchParams,\n): string {\n  const newParams = new URLSearchParams(\n    currentParams.toString(),\n  );\n\n  Object.entries(paramsToUpdate)\n    .forEach(([key, value]) => {\n      if (value === null) {\n        newParams.delete(key);\n      } else if (Array.isArray(value)) {\n        newParams.delete(key);\n\n        value.forEach(part => {\n          newParams.append(key, part);\n        });\n      } else {\n        newParams.set(key, value);\n      }\n    });\n\n  return newParams.toString();\n}\n","import React, { useMemo } from 'react';\nimport './App.css';\nimport { useSearchParams } from 'react-router-dom';\nimport { getNumbers } from './utils';\nimport { Pagination } from './components/Pagination';\n\nconst items = getNumbers(1, 42)\n  .map(n => `Item ${n}`);\n\nenum Params {\n  Page = 'page',\n  PerPage = 'perPage',\n}\n\nexport const App: React.FC = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const page = Number(searchParams.get(Params.Page)) || 1;\n  const itemsPerPage = Number(searchParams.get(Params.PerPage)) || 5;\n  const startIndex = useMemo(() => itemsPerPage * (page - 1) + 1,\n    [itemsPerPage, page]);\n  const endIndex = useMemo(() => (itemsPerPage * page > items.length\n    ? items.length\n    : itemsPerPage * page), [itemsPerPage, page]);\n  const visibleItems = useMemo(() => items.slice(startIndex - 1, endIndex),\n    [items, startIndex, endIndex]);\n  const handlePerPageSelector = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    searchParams.set(Params.Page, '1');\n    searchParams.set(Params.PerPage, e.target.value);\n    setSearchParams(searchParams);\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Items with Pagination</h1>\n\n      <p className=\"lead\" data-cy=\"info\">\n        { `Page ${page} (items ${startIndex} - ${endIndex} of ${items.length})`}\n      </p>\n\n      <div className=\"form-group row\">\n        <div className=\"col-3 col-sm-2 col-xl-1\">\n          <select\n            data-cy=\"perPageSelector\"\n            id=\"perPageSelector\"\n            value={itemsPerPage}\n            onChange={handlePerPageSelector}\n            className=\"form-control\"\n          >\n            <option value=\"3\">3</option>\n            <option value=\"5\">5</option>\n            <option value=\"10\">10</option>\n            <option value=\"20\">20</option>\n          </select>\n        </div>\n\n        <label htmlFor=\"perPageSelector\" className=\"col-form-label col\">\n          items per page\n        </label>\n      </div>\n\n      <Pagination\n        total={items.length}\n        perPage={itemsPerPage}\n        currentPage={page}\n      />\n      <ul>\n        {visibleItems.map(item => (\n          <li data-cy=\"item\" key={item}>{item}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import { useMemo } from 'react';\nimport { Link, useSearchParams } from 'react-router-dom';\nimport classNames from 'classnames';\nimport { getNumbers, getSearchWith } from '../../utils';\n\ntype Props = {\n  total: number,\n  perPage: number,\n  currentPage: number,\n};\n\nexport const Pagination: React.FC<Props> = ({\n  total,\n  perPage,\n  currentPage,\n}) => {\n  const pages = useMemo(() => (\n    getNumbers(1, Math.ceil(total / perPage))),\n  [total, perPage]);\n  const [searchParams] = useSearchParams();\n  const isLastPage = currentPage === pages.length;\n\n  return (\n    <ul className=\"pagination\">\n      <li className={classNames('page-item', {\n        disabled: currentPage === 1,\n      })}\n      >\n        <Link\n          data-cy=\"prevLink\"\n          className=\"page-link\"\n          aria-disabled={currentPage === 1}\n          to={{\n            search: getSearchWith(searchParams,\n              { page: currentPage === 1 ? '1' : (currentPage - 1).toString() }),\n          }}\n        >\n          «\n        </Link>\n      </li>\n      {pages.map(pageNumber => (\n        <li\n          className={classNames('page-item', {\n            active: currentPage === pageNumber,\n          })}\n          key={pageNumber}\n        >\n          <Link\n            data-cy=\"pageLink\"\n            className=\"page-link\"\n            to={{\n              search: getSearchWith(searchParams,\n                { page: pageNumber.toString() }),\n            }}\n          >\n            {pageNumber}\n          </Link>\n        </li>\n      ))}\n      <li\n        className={classNames('page-item', {\n          disabled: isLastPage,\n        })}\n      >\n        <Link\n          data-cy=\"nextLink\"\n          className=\"page-link\"\n          aria-disabled={isLastPage}\n          to={{\n            search: getSearchWith(searchParams,\n              {\n                page: isLastPage\n                  ? pages.length.toString()\n                  : (currentPage + 1).toString(),\n              }),\n          }}\n        >\n          »\n        </Link>\n      </li>\n    </ul>\n  );\n};\n","import ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport { App } from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>, document.getElementById('root'),\n);\n"],"sourceRoot":""}